(this["webpackJsonpmissing-pet-client"]=this["webpackJsonpmissing-pet-client"]||[]).push([[0],{12:function(e,t,a){"use strict";var r=a(79);a.d(t,"STORE_TOKEN",(function(){return r.a}));a(152);t.default=new r.b},152:function(e,t){},153:function(e,t){},18:function(e,t,a){"use strict";var r=a(80);a.d(t,"STORE_TOKEN",(function(){return r.b}));a(153);t.default=new r.a},192:function(e,t,a){e.exports=a.p+"static/media/placeholder.bac728e3.jpg"},193:function(e,t,a){e.exports=a(371)},27:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var r=8,n="missing_pet_user"},303:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){"use strict";a.r(t);var r,n,s,o,c,i,l,u=a(0),m=a.n(u),d=a(22),p=a.n(d),h=a(3),b=a(7),f=(a(198),a(59)),E=a(12),v=a(55),O=a(54),g=a(14),y=a(15),N=a(9),w=(a(92),a(180)),j=a.n(w),k="NotificationStore",x=new(r=function(){function e(){Object(g.a)(this,e),Object(O.a)(this,"notifications",n,this)}return Object(y.a)(e,[{key:"addNotification",value:function(e){this.notifications.push(Object(v.a)({type:"primary"},e,{id:j()()}))}},{key:"dismiss",value:function(e){this.notifications=this.notifications.filter((function(t){return t.id!==e}))}}]),e}(),n=Object(N.a)(r.prototype,"notifications",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(N.a)(r.prototype,"addNotification",[h.d],Object.getOwnPropertyDescriptor(r.prototype,"addNotification"),r.prototype),Object(N.a)(r.prototype,"dismiss",[h.d],Object.getOwnPropertyDescriptor(r.prototype,"dismiss"),r.prototype),r),I=a(18),S=(s={},Object(f.a)(s,E.STORE_TOKEN,E.default),Object(f.a)(s,k,x),Object(f.a)(s,I.STORE_TOKEN,I.default),s),T=a(17),C=a(91),A=Object(b.b)(E.STORE_TOKEN)(Object(b.c)((function(e){var t=e.UserStore,a=e.check,r=void 0===a?Boolean:a,n=e.success,s=e.fallback,o=Object(C.a)(e,["UserStore","check","success","fallback"]),c=Object(u.useMemo)((function(){return r(t.user)}),[r,t]);return Object(u.useEffect)((function(){!c&&s&&"string"===typeof s&&Object(T.c)(s)})),c?m.a.cloneElement(n,Object(v.a)({},o)):null}))),L=a(378),_=function(e){var t=e.text;return t?m.a.createElement(m.a.Fragment,null,t.split("\n").map((function(e,t){return m.a.createElement(L.a.Text,{className:"text-center text-md-left text-danger d-block mb-1",key:t},e)}))):null},D=a(184),R=(a(303),Object(b.b)(k)(Object(b.c)((function(e){var t=e[k],a=t.notifications.map((function(e){return m.a.createElement(D.a,{key:e.id,variant:e.type,className:"mp-notification",onClose:function(){return t.dismiss(e.id)},dismissible:!0},e.message)}));return m.a.createElement(m.a.Fragment,null,a)})))),B=a(37),P=a(35),F=a(38),U=a(380),K=a(379),G=Object(b.b)(E.STORE_TOKEN)(o=Object(b.c)(o=function(e){function t(){var e,a;Object(g.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(B.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(n)))).logout=function(){a.props[E.STORE_TOKEN].resetUser(),Object(T.c)("/authorization")},a.renderControls=function(){if(!a.props[E.STORE_TOKEN].isAuthorized)return null;var e=a.props[E.STORE_TOKEN].user;return m.a.createElement(m.a.Fragment,null,m.a.createElement(U.a.Toggle,null),m.a.createElement(U.a.Collapse,null,m.a.createElement(K.a,{className:"ml-auto"},m.a.createElement(K.a.Link,{as:T.a,to:"/dashboard"},"All posts"),e&&e.id?m.a.createElement(K.a.Link,{as:T.a,to:"/dashboard/".concat(e.id)},"My posts"):null,m.a.createElement(K.a.Item,{onClick:a.logout,className:"nav-link"},"Logout"))))},a}return Object(F.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return m.a.createElement(U.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},m.a.createElement(U.a.Brand,null,"Missing Pet"),this.renderControls())}}]),t}(m.a.Component))||o)||o,z=a(377),q=a(57),V=a(16),M=a(189),W=a.n(M),Z=a(373),H=a(183),J=a(374),Y=V.object({title:V.string().trim().transform((function(e){return this.isType(e)&&null!==e?W()(e):e})).required(),text:V.string().trim().max(500).required(),reward:V.number().positive().required(),tags:V.string().trim()}),Q=function(e){var t=e.onSubmit,a=e.onClose,r=void 0===a?function(){}:a,n=Object(u.useCallback)((function(e){var a=Y.cast(e);a.tags?a.tags=a.tags.split(";").filter(Boolean):a.tags=[],t(a)}),[t]),s=Object(q.b)({initialValues:{title:"",text:"",reward:0,tags:""},validationSchema:Y,validateOnBlur:!0,onSubmit:n});return m.a.createElement(L.a,{noValidate:!0,onSubmit:s.handleSubmit},m.a.createElement(L.a.Group,{controlId:"addItemForm.title"},m.a.createElement(L.a.Label,null,"Title"),m.a.createElement(L.a.Control,{type:"text",name:"title",placeholder:"The name of the advertisement",value:s.values.title,isValid:s.touched.title&&!s.errors.title,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.title&&!!s.errors.title}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},s.errors.title)),m.a.createElement(L.a.Group,{controlId:"addItemForm.text"},m.a.createElement(L.a.Label,null,"Text"),m.a.createElement(L.a.Control,{as:"textarea",rows:"5",name:"text",value:s.values.text,isValid:s.touched.text&&!s.errors.text,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.text&&!!s.errors.text}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},s.errors.text)),m.a.createElement(L.a.Group,{controlId:"addItemForm.reward"},m.a.createElement(L.a.Label,null,"Reward"),m.a.createElement(L.a.Control,{type:"number",name:"reward",value:"".concat(s.values.reward),isValid:s.touched.reward&&!s.errors.reward,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.reward&&!!s.errors.reward}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},s.errors.reward)),m.a.createElement(L.a.Group,{controlId:"addItemForm.tags"},m.a.createElement(L.a.Label,null,"Tags"),m.a.createElement(L.a.Control,{as:"textarea",rows:"5",name:"tags",placeholder:"tag1;tag2;tag3",value:s.values.tags,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.tags&&!!s.errors.tags}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},s.errors.tags),m.a.createElement(L.a.Text,{className:"text-muted text-center text-md-left"},"Please separate your tags with semicolons")),m.a.createElement(Z.a,{className:"justify-content-between align-items-center"},m.a.createElement(H.a,{md:"6",xs:"12",className:"mb-2 mb-sm-0",onClick:r},m.a.createElement(J.a,{type:"button",variant:"secondary",className:"w-100"},"Cancel")),m.a.createElement(H.a,{md:"6",xs:"12",className:"mb-2 mb-sm-0"},m.a.createElement(J.a,{type:"submit",className:"w-100"},"Submit"))))},X=function(e){var t=e.show,a=e.onHide,r=void 0===a?function(){}:a,n=e.onSubmit,s=Object(u.useCallback)((function(e){n(e),r()}),[n,r]);return m.a.createElement(z.a,{show:t,onHide:r,size:"lg",centered:!0},m.a.createElement(z.a.Header,{closeButton:!0},m.a.createElement(z.a.Title,null,"Create new advertisement")),m.a.createElement(z.a.Body,null,t?m.a.createElement(Q,{onSubmit:s,onClose:r}):null))},$=a(376),ee=a(375),te=a(381),ae=a(89),re=a.n(ae),ne=a(192),se=a.n(ne),oe=(a(367),["primary","secondary","success","danger","warning","info","light","dark"]),ce=function(e){var t=e.title,a=e.text,r=e.reward,n=e.tags,s=e.imageUrl,o=e.creationDate,c=e.onClick,i=Object(u.useMemo)((function(){return(n||[]).map((function(e,t){return m.a.createElement(ee.a,{variant:re()(oe),key:t,className:"mr-1 mb-1"},e)}))}),[n]);return m.a.createElement(te.a,{style:{width:"18rem"},className:"mb-3 mr-3"},m.a.createElement(te.a.Img,{variant:"top",src:s||se.a,style:{height:"18rem"}}),m.a.createElement("div",{className:"p-2"},m.a.createElement(te.a.Title,{className:"mb-1 mr-2"},t),m.a.createElement("div",{className:"d-flex flex-wrap"},i),m.a.createElement(te.a.Text,{className:"mt-2 ad__text"},a),m.a.createElement("div",{className:"mb-2"},m.a.createElement("div",null,m.a.createElement("strong",null,"Reward:")," ",r),m.a.createElement("div",null,m.a.createElement("strong",null,"Posted at:")," ",new Date(o).toDateString())),m.a.createElement(J.a,{variant:"primary",className:"w-100",onClick:c},"See details")))},ie=(a(368),[]),le=Object(b.b)(I.STORE_TOKEN,k)(c=Object(b.c)(c=function(e){function t(){var e,a;Object(g.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(B.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(n)))).state={showAddItemModal:!1},a.toggleAddItemModal=function(){a.setState({showAddItemModal:!a.state.showAddItemModal})},a.createItem=function(e){a.props[I.STORE_TOKEN].createItem(e)},a.goToItem=function(e){Object(T.c)("/dashboard/ads/".concat(e))},a}return Object(F.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props[I.STORE_TOKEN],t=this.props[k];e.itemsWereFetched||e.loadItems();var a=h.m((function(){return e.isError}),(function(){t.addNotification({message:"Failed to load advertisements, please try again later",type:"danger"})}));ie.push(a)}},{key:"componentWillUnmount",value:function(){ie.forEach((function(e){return e()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t[I.STORE_TOKEN],r=t.userId,n=a.isLoading,s=a.isError,o=this.state.showAddItemModal,c=a.ads;return r&&(c=c.filter((function(e){return e.accountId===Number(r)}))),n?m.a.createElement("div",{className:"w-100 h-100 d-flex justify-content-center align-items-center"},m.a.createElement($.a,{animation:"border",className:"dashboard-spinner"})):s?m.a.createElement("h1",null,"Oh-oh :("):m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"dashboard__add-item pb-0 p-md-2"},m.a.createElement(J.a,{variant:"dark",size:"lg",block:!0,onClick:this.toggleAddItemModal},"+ Create new advertisement")),m.a.createElement("div",{className:"d-flex flex-wrap justify-content-around"},c.map((function(t,a){return m.a.createElement(ce,{key:a,title:t.title,text:t.text,reward:t.reward,tags:t.tags,imageUrl:t.imageUrl,creationDate:t.creationDate,onClick:function(){return e.goToItem(a)}})}))),m.a.createElement(X,{show:o,onHide:this.toggleAddItemModal,onSubmit:this.createItem}))}}]),t}(u.Component))||c)||c,ue=a(27),me=V.object({userName:V.string().required("This field is required").trim(),password:V.string().required().min(ue.a)}),de=[],pe=Object(b.b)(E.STORE_TOKEN)(i=Object(b.c)(i=function(e){function t(){return Object(g.a)(this,t),Object(B.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props[E.STORE_TOKEN];this.props[I.STORE_TOKEN].reset();var t=h.m((function(){return e.isAuthorized}),(function(){Object(T.c)("/dashboard")}));de.push(t)}},{key:"componentWillUnmount",value:function(){this.props[E.STORE_TOKEN].resetError(),de.forEach((function(e){return e}))}},{key:"render",value:function(){var e=this.props[E.STORE_TOKEN],t=e.isLoading,a=e.isSignedUp?e.user.userName:"",r=e.isSignedUp?e.user.password:"";return m.a.createElement("div",{className:"mx-auto form-container d-flex flex-column justify-content-center h-100"},m.a.createElement("div",{className:"form-container__form p-3 rounded"},m.a.createElement("h2",null,"Log in"),m.a.createElement("span",{className:"mb-2 mb-md-4 d-block text-muted"},"Please authorize to have full access to the web site."),m.a.createElement(q.a,{initialValues:{userName:a,password:r},validationSchema:me,onSubmit:function(t){return e.login(t)},validateOnBlur:!0},(function(a){var r=a.values,n=a.errors,s=a.touched,o=a.handleSubmit,c=a.handleChange,i=a.handleBlur;return m.a.createElement(L.a,{noValidate:!0,onSubmit:o},m.a.createElement(L.a.Group,{controlId:"userName"},m.a.createElement(L.a.Label,null,"Username"),m.a.createElement(L.a.Control,{type:"text",name:"userName",placeholder:"Username",value:r.userName,isValid:s.userName&&!n.userName,onChange:c,onBlur:i,isInvalid:s.userName&&!!n.userName}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.userName)),m.a.createElement(L.a.Group,{controlId:"formBasicPassword"},m.a.createElement(L.a.Label,null,"Password"),m.a.createElement(L.a.Control,{type:"password",placeholder:"Password",name:"password",value:r.password,isValid:s.password&&!n.password,onChange:c,onBlur:i,isInvalid:s.password&&!!n.password}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.password)),m.a.createElement(_,{text:e.errorReason.get()||""}),m.a.createElement(Z.a,{className:"justify-content-between align-items-center"},m.a.createElement(H.a,{md:"6",xs:"12",className:"mb-2 mb-sm-0 "},m.a.createElement(J.a,{type:"submit",className:"w-100",disabled:t},t?m.a.createElement($.a,{animation:"border"}):"Log in")),m.a.createElement(H.a,{md:"6",xs:"12",className:"text-center text-md-left"},m.a.createElement("span",{className:"d-block w-100"},"Do not have an account?"," ",m.a.createElement(T.a,{to:"/"},"Create one here.")))))}))))}}]),t}(u.Component))||i)||i,he=V.object({email:V.string().required("This field is required").trim().matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,"The provided string is not an email"),password:V.string().required("This field is required").trim().min(ue.a),firstName:V.string().required("This field is required").trim(),lastName:V.string().required("This field is required").trim(),phoneNumber:V.string().required("This field is required").trim().matches(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/,"Phone number is not valid"),userName:V.string().required("This field is required").trim()}),be=[],fe=Object(b.b)(E.STORE_TOKEN,k)(l=Object(b.c)(l=function(e){function t(){return Object(g.a)(this,t),Object(B.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.props[E.STORE_TOKEN],t=this.props[k];this.props[I.STORE_TOKEN].reset();var a=h.m((function(){return e.isSignedUp}),(function(){t.addNotification({message:"Account was created, please log in to proceed",type:"success"}),Object(T.c)("authorization")}));be.push(a)}},{key:"componentWillUnmount",value:function(){this.props[E.STORE_TOKEN].resetError(),be.forEach((function(e){return e}))}},{key:"render",value:function(){var e=this.props[E.STORE_TOKEN],t=e.isLoading;return m.a.createElement("div",{className:"mx-auto form-container d-flex flex-column justify-content-center h-100"},m.a.createElement("div",{className:"form-container__form p-3 rounded"},m.a.createElement("h2",null,"Sign Up"),m.a.createElement("span",{className:"mb-2 mb-md-4 d-block text-muted"},"Please create an account to have full access to the web site."),m.a.createElement(q.a,{initialValues:{email:"",password:"",firstName:"",lastName:"",phoneNumber:"",userName:""},validationSchema:he,onSubmit:function(t){return e.createAccount(t)},validateOnBlur:!0},(function(a){var r=a.values,n=a.errors,s=a.touched,o=a.handleSubmit,c=a.handleChange,i=a.handleBlur;return m.a.createElement(L.a,{noValidate:!0,onSubmit:o},m.a.createElement(L.a.Row,null,m.a.createElement(L.a.Group,{as:H.a,md:"6",controlId:"firstName"},m.a.createElement(L.a.Label,null,"First name"),m.a.createElement(L.a.Control,{type:"text",name:"firstName",value:r.firstName,onChange:c,onBlur:i,isValid:s.firstName&&!n.firstName,isInvalid:s.firstName&&!!n.firstName,placeholder:"John"}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.firstName)),m.a.createElement(L.a.Group,{as:H.a,md:"6",controlId:"lastName"},m.a.createElement(L.a.Label,null,"Last name"),m.a.createElement(L.a.Control,{type:"text",name:"lastName",value:r.lastName,onChange:c,onBlur:i,isValid:s.lastName&&!n.lastName,isInvalid:s.lastName&&!!n.lastName,placeholder:"Doe"}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.lastName))),m.a.createElement(L.a.Row,null,m.a.createElement(L.a.Group,{as:H.a,md:"6",controlId:"userName"},m.a.createElement(L.a.Label,null,"Username"),m.a.createElement(L.a.Control,{type:"text",name:"userName",value:r.userName,onChange:c,onBlur:i,isValid:s.userName&&!n.userName,isInvalid:s.userName&&!!n.userName,placeholder:"johndoe"}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.userName)),m.a.createElement(L.a.Group,{as:H.a,md:"6",controlId:"phoneNumber"},m.a.createElement(L.a.Label,null,"Phone number"),m.a.createElement(L.a.Control,{type:"phone",name:"phoneNumber",placeholder:"+380*********",value:r.phoneNumber,isValid:s.phoneNumber&&!n.phoneNumber,onChange:c,onBlur:i,isInvalid:s.phoneNumber&&!!n.phoneNumber}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.phoneNumber))),m.a.createElement(L.a.Row,null,m.a.createElement(L.a.Group,{as:H.a,md:"6",controlId:"email"},m.a.createElement(L.a.Label,null,"Email"),m.a.createElement(L.a.Control,{type:"text",name:"email",placeholder:"john@doe.com",value:r.email,isValid:s.email&&!n.email,onChange:c,onBlur:i,isInvalid:s.email&&!!n.email}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.email)),m.a.createElement(L.a.Group,{as:H.a,md:"6",controlId:"password"},m.a.createElement(L.a.Label,null,"Password"),m.a.createElement(L.a.Control,{type:"password",placeholder:"Password",name:"password",value:r.password,isValid:s.password&&!n.password,onChange:c,onBlur:i,isInvalid:s.password&&!!n.password}),m.a.createElement(L.a.Control.Feedback,{type:"invalid"},n.password))),m.a.createElement(_,{text:e.errorReason.get()||""}),m.a.createElement(Z.a,{className:"justify-content-between align-items-center"},m.a.createElement(H.a,{md:"6",xs:"12",className:"mb-2 mb-sm-0 "},m.a.createElement(J.a,{type:"submit",className:"w-100",disabled:t},t?m.a.createElement($.a,{animation:"border"}):"Submit")),m.a.createElement(H.a,{md:"6",xs:"12",className:"text-center text-md-left"},m.a.createElement("span",{className:"d-block w-100"},"Already have an account? Click"," ",m.a.createElement(T.a,{to:"authorization"},"here")," to log in."))),m.a.createElement(L.a.Text,{className:"text-muted text-center text-md-left"},"We'll never share your data with anyone else."))}))))}}]),t}(u.Component))||l)||l,Ee=(a(369),a(370),Object(b.b)(I.STORE_TOKEN)(Object(b.c)((function(e){var t=e.idx,a=e[I.STORE_TOKEN];Object(u.useEffect)((function(){a.itemsWereFetched||a.loadItems()}),[a]);var r=Object(u.useMemo)((function(){return a.getItem(Number(t))}),[t,a.ads,a]),n=a.isLoading,s=Object(u.useMemo)((function(){return(r&&r.tags||[]).map((function(e,t){return m.a.createElement(ee.a,{variant:re()(oe),key:t,className:"mr-1 mb-1"},e)}))}),[r]);return n?m.a.createElement("h1",null,"Loading..."):r?m.a.createElement("div",null,m.a.createElement(J.a,{variant:"link",className:"p-0",onClick:function(){return window.history.back()}},"Go Back"),m.a.createElement("h1",{className:"border-bottom my-4"},r.title),m.a.createElement(Z.a,{as:te.a,className:"ad-details__content flex-row p-2 mx-auto mx-md-0"},m.a.createElement(H.a,{md:"8",xs:"12",className:"border-bottom"},m.a.createElement(te.a,{className:"mb-2",bg:"light"},m.a.createElement(te.a.Header,{className:"px-2"},m.a.createElement("strong",null,"Description")),m.a.createElement(te.a.Body,{className:"p-2"},m.a.createElement("p",null,r.text),m.a.createElement("small",{className:"text-muted"},"Created on: ",new Date(r.creationDate).toLocaleDateString()))),"Tags: ",s),m.a.createElement(H.a,{md:"4",xs:"12"},m.a.createElement("strong",{className:"d-block mb-1 mt-3 mt-md-0"},"Details:"),m.a.createElement("ul",{className:"list-unstyled mt-1 mt-md-0"},m.a.createElement("li",{className:"d-flex align-items-center justify-content-between"},m.a.createElement("span",null,"Reward"),m.a.createElement("span",{className:"font-weight-bold"},r.reward)),m.a.createElement("li",{className:"d-flex align-items-center justify-content-between"},m.a.createElement("span",null,"Author"),m.a.createElement("span",{className:"font-weight-bold"},"".concat(r.account.FirstName.slice(0,1),". ").concat(r.account.LastName))),m.a.createElement("li",{className:"d-flex align-items-center justify-content-between"},m.a.createElement("span",null,"Phone"),m.a.createElement("span",{className:"font-weight-bold"},m.a.createElement("a",{href:"tel:".concat(r.account.PhoneNumber)},r.account.PhoneNumber))))))):m.a.createElement("h1",null,"404 | Item not found")})))),ve=function(){return m.a.createElement("div",{className:"app"},m.a.createElement(R,null),m.a.createElement(G,null),m.a.createElement(T.b,{className:"app__content container-fluid py-3"},m.a.createElement(A,{check:function(e){return!e||!e.accessToken},success:m.a.createElement(fe,null),fallback:"/dashboard",path:"/"}),m.a.createElement(A,{check:function(e){return!e||!e.accessToken},success:m.a.createElement(pe,null),fallback:"/dashboard",path:"/authorization"}),m.a.createElement(A,{check:function(e){return!!e&&!!e.accessToken},success:m.a.createElement(le,null),fallback:"/authorization",path:"/dashboard"}),m.a.createElement(A,{check:function(e){return!!e&&!!e.accessToken},success:m.a.createElement(Ee,null),fallback:"/authorization",path:"/dashboard/ads/:idx"}),m.a.createElement(A,{check:function(e){return!!e&&!!e.accessToken},success:m.a.createElement(le,null),fallback:"/authorization",path:"/dashboard/:userId"})))};h.f({enforceActions:"observed"}),p.a.render(m.a.createElement(b.a,S,m.a.createElement(ve,null)),document.getElementById("root"))},79:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return E}));var r,n,s,o=a(13),c=a.n(o),i=a(54),l=a(14),u=a(15),m=a(9),d=(a(92),a(3)),p=a(177),h=a.n(p),b=a(90),f="UserStore";!function(e){e[e.INITIAL=0]="INITIAL",e[e.LOADING=1]="LOADING",e[e.FAILED=2]="FAILED",e[e.SUCCESS=3]="SUCCESS"}(s||(s={}));var E=(r=function(){function e(){Object(l.a)(this,e),Object(i.a)(this,"user",n,this),this.state=d.l.box(s.INITIAL),this.errorReason=d.l.box(""),this.userService=b.b,this.user=this.userService.user||void 0}return Object(u.a)(e,[{key:"createAccount",value:function(e){var t,a=this;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,Object(d.n)((function(){a.state.set(s.LOADING),a.errorReason.set("")})),r.next=4,c.a.awrap(this.userService.createAccount(e));case 4:t=r.sent,Object(d.n)((function(){a.user=t,a.state.set(s.SUCCESS)})),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),Object(d.n)((function(){a.state.set(s.FAILED),a.errorReason.set(r.t0.message)}));case 11:case"end":return r.stop()}}),null,this,[[0,8]])}},{key:"login",value:function(e){var t,a=this;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,Object(d.n)((function(){a.state.set(s.LOADING),a.errorReason.set("")})),r.next=4,c.a.awrap(this.userService.authorize(e));case 4:t=r.sent,Object(d.n)((function(){a.user=a.user||{},a.user.accessToken=t,a.state.set(s.SUCCESS)})),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),Object(d.n)((function(){a.state.set(s.FAILED),a.errorReason.set(r.t0.message)}));case 11:case"end":return r.stop()}}),null,this,[[0,8]])}},{key:"resetUser",value:function(){this.user=void 0,this.userService.reset()}},{key:"resetError",value:function(){this.errorReason.set("")}},{key:"isLoading",get:function(){return this.state.get()===s.LOADING}},{key:"isSignedUp",get:function(){return!!this.user&&(!this.user.accessToken&&Object.values(h()(this.user,"accessToken")).every(Boolean))}},{key:"isAuthorized",get:function(){return Boolean(this.user)&&Boolean(this.user.accessToken)}}]),e}(),n=Object(m.a)(r.prototype,"user",[d.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(m.a)(r.prototype,"isLoading",[d.e],Object.getOwnPropertyDescriptor(r.prototype,"isLoading"),r.prototype),Object(m.a)(r.prototype,"isSignedUp",[d.e],Object.getOwnPropertyDescriptor(r.prototype,"isSignedUp"),r.prototype),Object(m.a)(r.prototype,"isAuthorized",[d.e],Object.getOwnPropertyDescriptor(r.prototype,"isAuthorized"),r.prototype),Object(m.a)(r.prototype,"createAccount",[d.d],Object.getOwnPropertyDescriptor(r.prototype,"createAccount"),r.prototype),Object(m.a)(r.prototype,"login",[d.d],Object.getOwnPropertyDescriptor(r.prototype,"login"),r.prototype),Object(m.a)(r.prototype,"resetUser",[d.d],Object.getOwnPropertyDescriptor(r.prototype,"resetUser"),r.prototype),Object(m.a)(r.prototype,"resetError",[d.d],Object.getOwnPropertyDescriptor(r.prototype,"resetError"),r.prototype),r)},80:function(e,t,a){"use strict";a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return b}));var r,n,s,o=a(13),c=a.n(o),i=a(54),l=a(14),u=a(15),m=a(9),d=(a(92),a(3)),p=a(90);!function(e){e[e.INITIAL=0]="INITIAL",e[e.LOADING=1]="LOADING",e[e.FAILED=2]="FAILED",e[e.SUCCESS=3]="SUCCESS"}(s||(s={}));var h="AdvertisementStore",b=(r=function(){function e(){Object(l.a)(this,e),Object(i.a)(this,"ads",n,this),this.state=d.l.box(s.INITIAL),this.advertisementService=p.a}return Object(u.a)(e,[{key:"getItem",value:function(e){var t=this;return Object(d.e)((function(){return t.ads[e]})).get()}},{key:"loadItems",value:function(){var e,t=this;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,Object(d.n)((function(){return t.state.set(s.LOADING)})),a.next=4,c.a.awrap(this.advertisementService.getItems());case 4:e=a.sent,Object(d.n)((function(){t.ads=e,t.state.set(s.SUCCESS)})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),Object(d.n)((function(){return t.state.set(s.FAILED)}));case 11:case"end":return a.stop()}}),null,this,[[0,8]])}},{key:"createItem",value:function(e){var t=this;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,Object(d.n)((function(){return t.state.set(s.LOADING)})),a.next=4,c.a.awrap(this.advertisementService.createItem(e));case 4:Object(d.n)((function(){return t.loadItems()})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Object(d.n)((function(){return t.state.set(s.FAILED)}));case 10:case"end":return a.stop()}}),null,this,[[0,7]])}},{key:"reset",value:function(){this.ads=[],this.state.set(s.INITIAL)}},{key:"isLoading",get:function(){return this.state.get()===s.LOADING}},{key:"isError",get:function(){return this.state.get()===s.FAILED}},{key:"itemsWereFetched",get:function(){return this.state.get()===s.SUCCESS}}]),e}(),n=Object(m.a)(r.prototype,"ads",[d.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(m.a)(r.prototype,"isLoading",[d.e],Object.getOwnPropertyDescriptor(r.prototype,"isLoading"),r.prototype),Object(m.a)(r.prototype,"isError",[d.e],Object.getOwnPropertyDescriptor(r.prototype,"isError"),r.prototype),Object(m.a)(r.prototype,"itemsWereFetched",[d.e],Object.getOwnPropertyDescriptor(r.prototype,"itemsWereFetched"),r.prototype),Object(m.a)(r.prototype,"loadItems",[d.d],Object.getOwnPropertyDescriptor(r.prototype,"loadItems"),r.prototype),Object(m.a)(r.prototype,"createItem",[d.d],Object.getOwnPropertyDescriptor(r.prototype,"createItem"),r.prototype),Object(m.a)(r.prototype,"reset",[d.d],Object.getOwnPropertyDescriptor(r.prototype,"reset"),r.prototype),r)},90:function(e,t,a){"use strict";var r=a(178),n=a.n(r),s=a(60),o=a.n(s),c=a(27),i=(o.a.getJSON(c.b),"eDuWLvY9mgVULy-UER-CWg_v5KoT59mQHO6SXdswKrP5ulv7vYvGRzjADPs4AvSKMBF2Go2KlkM9aqHromV9PAwqRbKSzbrW7PBs-jm_8GzJmhY6V4oO2etGwI0L4StliQzWnKvN2MTfhi5fANrPo2xogpCsly9fTPry2mWGFRxJFl-bThUBzCjwZsAhYYT-r7hXrURN-UBKVzwsz3Ii3tz6-OV2yrEwJ0F78svCwoO3t7ub05EE7oA--NxbiEQZ-kiGMjBxcaiHK63tZBU7tiDBROZsrmPvIKYojuMliwRR9tumEH-rRYnx0hmk6bPbmjG_0G0duLIGfswVZqPcj-BPGk-_5mqhlDePt65eNqxjXpZ8GFOWKB05wuAa-rH7ojo8gB0HsDZQxqFfa0Z94WrL7eHqQo4_G1iCK36aPpsebhiBp4uONJL8fuXxyltZQ-ck09SiVq8YXaEQ7ZRvsEY2SIQ2R4nDObB6zwM-Y9o"),l=n.a.create({baseURL:"https://missing-pet.azurewebsites.net",headers:{Authorization:"Bearer ".concat(i)}}),u=a(13),m=a.n(u),d=a(55),p=a(14),h=a(15),b=a(117),f=a.n(b),E=a(179),v=a.n(E),O=new(function(){function e(){Object(p.a)(this,e),this._http=l,this._user=void 0,this._user=o.a.getJSON(c.b)}return Object(h.a)(e,[{key:"reset",value:function(){o.a.remove(c.b),this._user=void 0}},{key:"createAccount",value:function(e){var t,a,r,n;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t={Email:e.email,Password:e.password,ConfirmPassword:e.password,FirstName:e.firstName,UserName:e.userName,LastName:e.lastName,PhoneNumber:e.phoneNumber},s.next=4,m.a.awrap(this._http.post("/api/account",t));case 4:return a=s.sent,this._user=Object(d.a)({},e,{id:a.data}),s.abrupt("return",this._user);case 9:throw s.prev=9,s.t0=s.catch(0),r=s.t0.response,n=r?f()(Object.values(r.data.ModelState)).join("\n"):"Something went wrong, please try again later",new Error(n);case 14:case"end":return s.stop()}}),null,this,[[0,9]])}},{key:"authorize",value:function(e){var t,a,r,n;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t={grant_type:"password",username:e.userName,password:e.password},s.next=4,m.a.awrap(this._http.post("/token",v.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 4:return a=s.sent,this.storeUser(a.data),s.abrupt("return",a.data.access_token);case 9:throw s.prev=9,s.t0=s.catch(0),r=s.t0.response,n=r&&r.data&&r.data.error_description||"Something went wrong, please try again later",new Error(n);case 14:case"end":return s.stop()}}),null,this,[[0,9]])}},{key:"storeUser",value:function(e){var t=this._user||{};t.accessToken=e.access_token,t.userName=t.userName||e.userName,t.id=t.id||Number(e.id),o.a.set(c.b,JSON.stringify(t))}},{key:"user",get:function(){return this._user}}]),e}()),g=a(91),y=new(function(){function e(){Object(p.a)(this,e),this._http=l,this._userService=O}return Object(h.a)(e,[{key:"getItems",value:function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(this._http.get("/api/adverts?IsDesc=true&ByCreationDate=true"));case 2:return e=t.sent,t.abrupt("return",(e.data||[]).map((function(e){return{title:e.Title,text:e.Text,reward:e.Reward,tags:e.Tags,creationDate:e.CreationDate,imageUrl:e.ImageUrl,accountId:e.AccountId,account:e.Account}})));case 4:case"end":return t.stop()}}),null,this)}},{key:"createItem",value:function(e){var t,a;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.image,t=Object(g.a)(e,["image"]),r.next=3,m.a.awrap(this._http.post("/api/adverts",{Title:t.title,Text:t.text,Reward:t.reward,AccountId:this._userService.user.id,Tags:t.tags}));case 3:a=r.sent,a.data;case 6:case"end":return r.stop()}}),null,this)}}]),e}());a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return y}))}},[[193,1,2]]]);
//# sourceMappingURL=main.ccca3203.chunk.js.map